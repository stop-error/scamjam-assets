queryLog:
  type: console
upstreams:
  strategy: strict
  timeout: 2s
  groups:
    default:
      - https://dns.quad9.net/dns-query
      - https://security.cloudflare-dns.com/dns-query
bootstrapDns:
  - upstream: https://dns.quad9.net/dns-query
    ips:
      - 9.9.9.9
      - 149.112.112.112
      - 2620:fe::9
      - 2620:fe::fe
  - upstream: https://security.cloudflare-dns.com/dns-query
    ips:
      - 1.1.1.2
      - 1.0.0.2
      - 2606:4700:4700::1112
      - 2606:4700:4700::1002
blocking:
  loading:
    maxErrorsPerSource: -1
    strategy: fast
    refreshPeriod: 2h
    downloads:
      timeout: 2m
  blockType: nxDomain
  blockTTL: 10s
  denylists:
    hagezi-dyndns:
      - https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/dyndns.txt
    cenk-whoisnrd:
      - https://stop-error.github.io/scamjam-blocklists/nrd-last-20-days.txt?dev=1
    scamjam-remoteaccess:
      - https://stop-error.github.io/scamjam-blocklists/scamjam-remoteaccess.txt
    hagezi-threat:
      - https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/tif.txt
    hagezi-popup:
      - https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/popupads.txt
    hagezi-tld:
      - https://stop-error.github.io/scamjam-blocklists/spam-tlds-onlydomains.txt
  allowlists:
    hagezi-tld:
      - https://stop-error.github.io/scamjam-blocklists/spam-tlds-allow-onlydomains.txt
  clientGroupsBlock:
    default:
      - hagezi-dyndns
      - cenk-whoisnrd
      - scamjam-remoteaccess
      - hagezi-threat
      - hagezi-popup
      - hagezi-tld
ports:
  dns: 127.0.0.3:53